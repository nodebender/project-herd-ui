<section class="block">
	<div class="search-bar">
		<input [(ngModel)]="keyword" class="hidden-input" type="text" (keydown)="search($event)">
		<a *ngIf="active" (click)="clear()">
			Clear
		</a>
		<div *ngIf="active" class="search-results">
			<ul>
				<li *ngIf="labels.length > 0">
					<h5 class="subheading">
						Checks
					</h5>
				</li>
				<li *ngFor="let check of labels">
					<a (click)="goTo(check)">{{check.system}}-{{ check.label }}</a>
				</li>
				<li *ngIf="systems.length > 0">
					<h5 class="subheading">
						Systems
					</h5>
				</li>
				<li *ngFor="let system of systems" class="result">
					<a class="checkbox" [ngClass]="{'checked': system.selected}"></a>
					<a (click)="toggleItem(system)">{{ system.name }}</a>
				</li>
				<li *ngIf="tags.length > 0">
					<h5 class="subheading">
						Tags
					</h5>
				</li>
				<li *ngFor="let tag of tags" class="result">
					<a class="checkbox" [ngClass]="{'checked': tag.selected}"></a>
					<a (click)="toggleItem(tag)">{{ tag.name }}</a>
				</li>
			</ul>
		</div>
	</div>


</section>

<section *ngIf="checks$ | async as checks; else loading">
	<app-check-state *ngFor="let check of checks" [state]="check" (click)="goTo(check)"></app-check-state>
</section>

<ng-template #loading>
	loading
</ng-template>